var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function s(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode.removeChild(e)}function c(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function d(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function h(e){return document.createTextNode(e)}function f(){return h(" ")}function p(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function g(e){return function(t){return t.preventDefault(),e.call(this,t)}}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function v(e,t){e.value=null==t?"":t}function b(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function w(e,t,n){e.classList[n?"add":"remove"](t)}let _;function S(e){_=e}function A(){if(!_)throw new Error("Function called outside component initialization");return _}function x(){const e=A();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach((t=>{t.call(e,i)}))}}}const k=[],E=[],C=[],O=[],I=Promise.resolve();let R=!1;function L(e){C.push(e)}function P(e){O.push(e)}let D=!1;const j=new Set;function T(){if(!D){D=!0;do{for(let e=0;e<k.length;e+=1){const t=k[e];S(t),$(t.$$)}for(S(null),k.length=0;E.length;)E.pop()();for(let e=0;e<C.length;e+=1){const t=C[e];j.has(t)||(j.add(t),t())}C.length=0}while(k.length);for(;O.length;)O.pop()();R=!1,D=!1,j.clear()}}function $(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const U=new Set;let F;function B(){F={r:0,c:[],p:F}}function M(){F.r||r(F.c),F=F.p}function z(e,t){e&&e.i&&(U.delete(e),e.i(t))}function N(e,t,n,r){if(e&&e.o){if(U.has(e))return;U.add(e),F.c.push((()=>{U.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function W(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function G(e){e&&e.c()}function H(e,n,o,a){const{fragment:s,on_mount:l,on_destroy:c,after_update:u}=e.$$;s&&s.m(n,o),a||L((()=>{const n=l.map(t).filter(i);c?c.push(...n):r(n),e.$$.on_mount=[]})),u.forEach(L)}function Q(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function V(e,t){-1===e.$$.dirty[0]&&(k.push(e),R||(R=!0,I.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function q(t,i,o,a,s,c,u=[-1]){const d=_;S(t);const h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let f=!1;if(h.ctx=o?o(t,i.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&s(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),f&&V(t,e)),n})):[],h.update(),f=!0,r(h.before_update),h.fragment=!!a&&a(h.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);h.fragment&&h.fragment.l(e),e.forEach(l)}else h.fragment&&h.fragment.c();i.intro&&z(t.$$.fragment),H(t,i.target,i.anchor,i.customElement),T()}S(d)}class Y{$destroy(){Q(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function K(t){let n,r,i,o,c;return{c(){n=u("a"),r=d("svg"),i=d("path"),o=d("path"),c=d("path"),m(i,"d","M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"),m(o,"d","M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"),m(o,"fill","currentColor"),b(o,"transform-origin","130px 106px"),m(o,"class","octo-arm svelte-1tzebjb"),m(c,"d","M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"),m(c,"fill","currentColor"),m(c,"class","octo-body"),m(r,"width","80"),m(r,"height","80"),m(r,"viewBox","0 0 250 250"),b(r,"fill","#64CEAA"),b(r,"color","#282a36"),b(r,"position","absolute"),b(r,"top","0"),b(r,"border","0"),b(r,"right","0"),m(r,"aria-hidden","true"),m(n,"href",t[0]),m(n,"target","_blank"),m(n,"class","github-corner svelte-1tzebjb"),m(n,"aria-label","View source on GitHub")},m(e,t){s(e,n,t),a(n,r),a(r,i),a(r,o),a(r,c)},p(e,[t]){1&t&&m(n,"href",e[0])},i:e,o:e,d(e){e&&l(n)}}}function X(e,t,n){let{href:r}=t;return e.$$set=e=>{"href"in e&&n(0,r=e.href)},[r]}class J extends Y{constructor(e){super(),q(this,e,X,K,o,{href:0})}}var Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ee(e){var t={exports:{}};return e(t,t.exports),t.exports}
/* @license
    Papa Parse
    v5.3.0
    https://github.com/mholt/PapaParse
    License: MIT
    */
var te=ee((function(e,t){e.exports=function e(){var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=n&&/blob:/i.test((t.location||{}).protocol),i={},o=0,a={parse:function(n,r){var s=(r=r||{}).dynamicTyping||!1;if(_(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!_(r.transform)&&r.transform,r.worker&&a.WORKERS_SUPPORTED){var l=function(){if(!a.WORKERS_SUPPORTED)return!1;var n,r,s=(n=t.URL||t.webkitURL||null,r=e.toString(),a.BLOB_URL||(a.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),l=new t.Worker(s);return l.onmessage=m,l.id=o++,i[l.id]=l}();return l.userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=_(r.step),r.chunk=_(r.chunk),r.complete=_(r.complete),r.error=_(r.error),delete r.worker,void l.postMessage({input:n,config:r,workerId:l.id})}var f=null;return"string"==typeof n?f=r.download?new c(r):new d(r):!0===n.readable&&_(n.read)&&_(n.on)?f=new h(r):(t.File&&n instanceof File||n instanceof Object)&&(f=new u(r)),f.stream(n)},unparse:function(e,t){var n=!1,r=!0,i=",",o="\r\n",s='"',l=s+s,c=!1,u=null,d=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||a.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+s),"boolean"==typeof t.escapeFormulae&&(d=t.escapeFormulae)}}();var h=new RegExp(p(s),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return g(null,e,c);if("object"==typeof e[0])return g(u||f(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:f(e.data[0])),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),g(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function f(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function g(e,t,n){var a="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var s=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(s&&r){for(var c=0;c<e.length;c++)0<c&&(a+=i),a+=m(e[c],c);0<t.length&&(a+=o)}for(var u=0;u<t.length;u++){var d=s?e.length:t[u].length,h=!1,f=s?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!s&&(h="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&s){for(var p=[],g=0;g<d;g++){var y=l?e[g]:g;p.push(t[u][y])}h=""===p.join("").trim()}if(!h){for(var v=0;v<d;v++){0<v&&!f&&(a+=i);var b=s&&l?e[v]:v;a+=m(t[u][b],v)}u<t.length-1&&(!n||0<d&&!f)&&(a+=o)}}return a}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===d&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var r=e.toString().replace(h,l);return"boolean"==typeof n&&n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(r,a.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?s+r+s:r}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!n&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=g,a.ParserHandle=f,a.NetworkStreamer=c,a.FileStreamer=u,a.StringStreamer=d,a.ReadableStreamStreamer=h,t.jQuery){var s=t.jQuery;s.fn.parse=function(e){var n=e.config||{},r=[];return this.each((function(e){if("INPUT"!==s(this).prop("tagName").toUpperCase()||"file"!==s(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:s.extend({},n)})})),i(),this;function i(){if(0!==r.length){var t,n,i,l,c=r[0];if(_(e.before)){var u=e.before(c.file,c.inputElem);if("object"==typeof u){if("abort"===u.action)return t="AbortError",n=c.file,i=c.inputElem,l=u.reason,void(_(e.error)&&e.error({name:t},n,i,l));if("skip"===u.action)return void o();"object"==typeof u.config&&(c.instanceConfig=s.extend(c.instanceConfig,u.config))}else if("skip"===u)return void o()}var d=c.instanceConfig.complete;c.instanceConfig.complete=function(e){_(d)&&d(e,c.file,c.inputElem),o()},a.parse(c.file,c.instanceConfig)}else _(e.complete)&&e.complete()}function o(){r.splice(0,1),i()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&_(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=s.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),s&&s.data&&(this._rowCount+=s.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:s,workerId:a.WORKER_ID,finished:c});else if(_(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!c||!_(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),l.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function u(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),l.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,i)}var o=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function h(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=w((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=w((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=w((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(e){var t,n,r,i=Math.pow(2,53),o=-i,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,l=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,c=this,u=0,d=0,h=!1,f=!1,m=[],y={data:[],errors:[],meta:{}};if(_(e.step)){var v=e.step;e.step=function(t){if(y=t,A())S();else{if(S(),0===y.data.length)return;u+=t.data.length,e.preview&&u>e.preview?n.abort():(y.data=y.data[0],v(y,c))}}}function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function S(){if(y&&r&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines)for(var t=0;t<y.data.length;t++)w(y.data[t])&&y.data.splice(t--,1);return A()&&function(){if(y)if(Array.isArray(y.data[0])){for(var t=0;A()&&t<y.data.length;t++)y.data[t].forEach(n);y.data.splice(0,1)}else y.data.forEach(n);function n(t,n){_(e.transformHeader)&&(t=e.transformHeader(t,n)),m.push(t)}}(),function(){if(!y||!e.header&&!e.dynamicTyping&&!e.transform)return y;function t(t,n){var r,i=e.header?{}:[];for(r=0;r<t.length;r++){var o=r,a=t[r];e.header&&(o=r>=m.length?"__parsed_extra":m[r]),e.transform&&(a=e.transform(a,o)),a=x(o,a),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(a)):i[o]=a}return e.header&&(r>m.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+r,d+n):r<m.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+r,d+n)),i}var n=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(t),n=y.data.length):y.data=t(y.data,0),e.header&&y.meta&&(y.meta.fields=m),d+=n,y}()}function A(){return e.header&&0===m.length}function x(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(s.test(e)){var t=parseFloat(e);if(o<t&&t<i)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var r}function k(e,t,n,r){var i={type:e,code:t,message:n};void 0!==r&&(i.row=r),y.errors.push(i)}this.parse=function(i,o,s){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(p(t)+"([^]*?)"+p(t),"gm"),r=(e=e.replace(n,"")).split("\r"),i=e.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var a=0,s=0;s<r.length;s++)"\n"===r[s][0]&&a++;return a>=r.length/2?"\r\n":"\r"}(i,l)),r=!1,e.delimiter)_(e.delimiter)&&(e.delimiter=e.delimiter(i),y.meta.delimiter=e.delimiter);else{var c=function(t,n,r,i,o){var s,l,c,u;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var d=0;d<o.length;d++){var h=o[d],f=0,p=0,m=0;c=void 0;for(var y=new g({comments:i,delimiter:h,newline:n,preview:10}).parse(t),v=0;v<y.data.length;v++)if(r&&w(y.data[v]))m++;else{var b=y.data[v].length;p+=b,void 0!==c?0<b&&(f+=Math.abs(b-c),c=b):c=b}0<y.data.length&&(p/=y.data.length-m),(void 0===l||f<=l)&&(void 0===u||u<p)&&1.99<p&&(l=f,s=h,u=p)}return{successful:!!(e.delimiter=s),bestDelimiter:s}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(r=!0,e.delimiter=a.DefaultDelimiter),y.meta.delimiter=e.delimiter}var u=b(e);return e.preview&&e.header&&u.preview++,t=i,n=new g(u),y=n.parse(t,o,s),S(),h?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,n.abort(),t=_(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(h=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),y.meta.aborted=!0,_(e.complete)&&e.complete(y),t=""}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(e){var t,n=(e=e||{}).delimiter,r=e.newline,i=e.comments,o=e.step,s=e.preview,l=e.fastMode,c=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof n||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,d=!1;this.parse=function(e,a,h){if("string"!=typeof e)throw new Error("Input must be a string");var f=e.length,g=n.length,m=r.length,y=i.length,v=_(o),b=[],w=[],S=[],A=u=0;if(!e)return U();if(l||!1!==l&&-1===e.indexOf(t)){for(var x=e.split(r),k=0;k<x.length;k++){if(S=x[k],u+=S.length,k!==x.length-1)u+=r.length;else if(h)return U();if(!i||S.substring(0,y)!==i){if(v){if(b=[],D(S.split(n)),F(),d)return U()}else D(S.split(n));if(s&&s<=k)return b=b.slice(0,s),U(!0)}}return U()}for(var E=e.indexOf(n,u),C=e.indexOf(r,u),O=new RegExp(p(c)+p(t),"g"),I=e.indexOf(t,u);;)if(e[u]!==t)if(i&&0===S.length&&e.substring(u,u+y)===i){if(-1===C)return U();u=C+m,C=e.indexOf(r,u),E=e.indexOf(n,u)}else{if(-1!==E&&(E<C||-1===C)){if(!(E<I)){S.push(e.substring(u,E)),u=E+g,E=e.indexOf(n,u);continue}var R=B(E,I,C);if(R&&void 0!==R.nextDelim){E=R.nextDelim,I=R.quoteSearch,S.push(e.substring(u,E)),u=E+g,E=e.indexOf(n,u);continue}}if(-1===C)break;if(S.push(e.substring(u,C)),$(C+m),v&&(F(),d))return U();if(s&&b.length>=s)return U(!0)}else for(I=u,u++;;){if(-1===(I=e.indexOf(t,I+1)))return h||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),T();if(I===f-1)return T(e.substring(u,I).replace(O,t));if(t!==c||e[I+1]!==c){if(t===c||0===I||e[I-1]!==c){-1!==E&&E<I+1&&(E=e.indexOf(n,I+1)),-1!==C&&C<I+1&&(C=e.indexOf(r,I+1));var L=j(-1===C?E:Math.min(E,C));if(e[I+1+L]===n){S.push(e.substring(u,I).replace(O,t)),e[u=I+1+L+g]!==t&&(I=e.indexOf(t,u)),E=e.indexOf(n,u),C=e.indexOf(r,u);break}var P=j(C);if(e.substring(I+1+P,I+1+P+m)===r){if(S.push(e.substring(u,I).replace(O,t)),$(I+1+P+m),E=e.indexOf(n,u),I=e.indexOf(t,u),v&&(F(),d))return U();if(s&&b.length>=s)return U(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),I++}}else I++}return T();function D(e){b.push(e),A=u}function j(t){var n=0;if(-1!==t){var r=e.substring(I+1,t);r&&""===r.trim()&&(n=r.length)}return n}function T(t){return h||(void 0===t&&(t=e.substring(u)),S.push(t),u=f,D(S),v&&F()),U()}function $(t){u=t,D(S),S=[],C=e.indexOf(r,u)}function U(e){return{data:b,errors:w,meta:{delimiter:n,linebreak:r,aborted:d,truncated:!!e,cursor:A+(a||0)}}}function F(){o(U()),b=[],w=[]}function B(r,i,o){var a={nextDelim:void 0,quoteSearch:void 0},s=e.indexOf(t,i+1);if(i<r&&r<s&&(s<o||-1===o)){var l=e.indexOf(n,s);if(-1===l)return a;s<l&&(s=e.indexOf(t,s+1)),a=B(l,s,o)}else a={nextDelim:r,quoteSearch:i};return a}},this.abort=function(){d=!0},this.getCharIndex=function(){return u}}function m(e){var t=e.data,n=i[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){r=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(_(n.userStep)){for(var a=0;a<t.results.data.length&&(n.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},o),!r);a++);delete t.results}else _(n.userChunk)&&(n.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!r&&y(t.workerId,t.results)}function y(e,t){var n=i[e];_(n.userComplete)&&n.userComplete(t),n.terminate(),delete i[e]}function v(){throw new Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=b(e[n]);return t}function w(e,t){return function(){e.apply(t,arguments)}}function _(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===a.WORKER_ID&&n&&(a.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:a.WORKER_ID,results:a.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=a.parse(n.input,n.config);r&&t.postMessage({workerId:a.WORKER_ID,results:r,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,a}()}));const ne={get playersParserSettings(){return{delimiter:"\t",header:!0}},parsePlayers(e){const t=e.lastIndexOf("\n");return-1!==t&&(e=e.substring(0,t)),te.parse(e,ne.playersParserSettings)}};function re(e){let t,n,r=e[0]._errors.join("; ")+"";return{c(){t=u("p"),n=h(r),m(t,"class","input-item__errors svelte-1lpg3wh")},m(e,r){s(e,t,r),a(t,n)},p(e,t){1&t&&r!==(r=e[0]._errors.join("; ")+"")&&y(n,r)},d(e){e&&l(t)}}}function ie(t){let n,i,o,c,d,_,S,A,x,k,E,C,O,I,R,L,P,D,j,T,$,U,F,B,M,z=t[1]+1+"",N=t[0]._errors.length>0&&re(t);return{c(){n=u("li"),i=u("div"),o=u("div"),c=h(z),d=f(),_=u("label"),S=h("Drop or click to upload leaderboard image\n            "),A=u("input"),x=f(),k=u("div"),E=u("textarea"),C=f(),O=u("div"),I=u("label"),R=u("input"),L=h(" Include bots?"),P=f(),D=u("label"),j=u("input"),T=h(" Single Column?"),$=f(),U=u("button"),U.textContent="X",F=f(),N&&N.c(),m(o,"class","input-item__round svelte-1lpg3wh"),m(A,"class","upload-drop-zone__input svelte-1lpg3wh"),m(A,"type","file"),m(_,"class","upload-drop-zone svelte-1lpg3wh"),b(_,"background-image","url("+(t[0].imageUrl??"")+")"),w(_,"upload-drop-zone--dragging",t[2]),m(E,"class","input-item__players svelte-1lpg3wh"),m(E,"placeholder","Paste the content from in-game /getplayers"),m(R,"type","checkbox"),m(I,"class","svelte-1lpg3wh"),m(j,"type","checkbox"),m(D,"class","svelte-1lpg3wh"),m(O,"class","input-item__toolbar svelte-1lpg3wh"),m(k,"class","input-item__settings svelte-1lpg3wh"),m(U,"type","button"),m(U,"class","input-item__remove svelte-1lpg3wh"),m(i,"class","input-item__content svelte-1lpg3wh"),m(n,"class","input-item svelte-1lpg3wh")},m(e,r){s(e,n,r),a(n,i),a(i,o),a(o,c),a(i,d),a(i,_),a(_,S),a(_,A),a(i,x),a(i,k),a(k,E),v(E,t[0].players),a(k,C),a(k,O),a(O,I),a(I,R),R.checked=t[0].isIncludeBots,a(I,L),a(O,P),a(O,D),a(D,j),j.checked=t[0].isSingleColumn,a(D,T),a(i,$),a(i,U),a(n,F),N&&N.m(n,null),B||(M=[p(A,"change",t[3]),p(_,"drop",g(t[4])),p(_,"dragover",g(t[5])),p(_,"dragenter",g(t[5])),p(_,"dragleave",g(t[6])),p(_,"dragend",g(t[6])),p(E,"input",t[8]),p(R,"change",t[9]),p(j,"change",t[10]),p(U,"click",t[7])],B=!0)},p(e,[t]){2&t&&z!==(z=e[1]+1+"")&&y(c,z),1&t&&b(_,"background-image","url("+(e[0].imageUrl??"")+")"),4&t&&w(_,"upload-drop-zone--dragging",e[2]),1&t&&v(E,e[0].players),1&t&&(R.checked=e[0].isIncludeBots),1&t&&(j.checked=e[0].isSingleColumn),e[0]._errors.length>0?N?N.p(e,t):(N=re(e),N.c(),N.m(n,null)):N&&(N.d(1),N=null)},i:e,o:e,d(e){e&&l(n),N&&N.d(),B=!1,r(M)}}}function oe(e,t,n){const r=["image/png","image/jpeg"],i=x();let{idx:o}=t,{input:a}=t,s=!1;return e.$$set=e=>{"idx"in e&&n(1,o=e.idx),"input"in e&&n(0,a=e.input)},e.$$.update=()=>{if(1&e.$$.dirty){if(n(0,a=Object.assign(Object.assign({},a),{_errors:[]})),a.players){const e=ne.parsePlayers(a.players);console.log(e),!(0===e.data.length||e.errors.length>0)&&e.data[0].pID&&e.data[0].Player&&e.data[0].PlayfabID||n(0,a=Object.assign(Object.assign({},a),{_errors:a._errors.concat("Invalid /getplayers data, please copy again from this command")}))}else n(0,a=Object.assign(Object.assign({},a),{_errors:a._errors.concat("Missing /getplayers data")}));a.imageUrl||n(0,a=Object.assign(Object.assign({},a),{_errors:a._errors.concat("Missing leaderboard image")}))}},[a,o,s,function(e){const t=e.target,[r]=t.files;n(0,a=Object.assign(Object.assign({},a),{imageUrl:URL.createObjectURL(r)}))},function(e){n(2,s=!1);const[t]=e.dataTransfer.items;"file"===t.kind&&r.includes(t.type)?n(0,a=Object.assign(Object.assign({},a),{imageUrl:URL.createObjectURL(t.getAsFile())})):alert("Only accept PNG or JPEG image")},function(e){n(2,s=!0)},function(e){n(2,s=!1)},function(){i("remove")},function(){a.players=this.value,n(0,a)},function(){a.isIncludeBots=this.checked,n(0,a)},function(){a.isSingleColumn=this.checked,n(0,a)}]}class ae extends Y{constructor(e){super(),q(this,e,oe,ie,o,{idx:1,input:0})}}function se(e,t,n){const r=e.slice();return r[12]=t[n],r[13]=t,r[14]=n,r}function le(e){let t,n,r;function i(t){e[8](t,e[12],e[13],e[14])}let o={idx:e[14]};return void 0!==e[12]&&(o.input=e[12]),t=new ae({props:o}),E.push((()=>W(t,"input",i))),t.$on("remove",(function(){return e[9](e[14])})),{c(){G(t.$$.fragment)},m(e,n){H(t,e,n),r=!0},p(r,i){e=r;const o={};!n&&1&i&&(n=!0,o.input=e[12],P((()=>n=!1))),t.$set(o)},i(e){r||(z(t.$$.fragment,e),r=!0)},o(e){N(t.$$.fragment,e),r=!1},d(e){Q(t,e)}}}function ce(t){let n,i,o,d,g,y,v,b,w,_,S,A,x,k,E,C,O,I,R,L,P,D,j,T,$,U,F,W=t[0],G=[];for(let e=0;e<W.length;e+=1)G[e]=le(se(t,W,e));const H=e=>N(G[e],1,1,(()=>{G[e]=null}));let Q=!t[2]&&function(t){let n,r,i,o,c;return{c(){n=u("label"),r=h("Compare output (debug)"),i=u("input"),m(i,"type","file")},m(e,l){s(e,n,l),a(n,r),a(n,i),o||(c=p(i,"change",t[3]),o=!0)},p:e,d(e){e&&l(n),o=!1,c()}}}(t);return{c(){n=u("div"),i=u("p"),i.innerHTML='Using Steam&#39;s built-in screenshot feature (output without app bar) is recommended. Image size required is\n        1920x1080.\n        <a href="/example-input.jpg" target="_blank">Example shown here</a>.',o=f(),d=u("ul");for(let e=0;e<G.length;e+=1)G[e].c();g=f(),Q&&Q.c(),y=f(),v=u("div"),b=u("button"),w=h("Add more rounds"),S=f(),A=u("button"),x=h("Start processing"),E=f(),C=u("h2"),C.textContent="How does it work?",O=f(),I=u("p"),I.innerHTML="It turns screenshots into 64 image rows, applies a negative (inverse colour), a threshold and a scale up to make\n        the text cleaner and adds a white background to text in black. It then masks the player&#39;s name (since some names\n        are so cool, it is diffcult to run OCR). Finally, it will output the ranking, player&#39;s in-match ID and kills.\n        You could use those data by the in-game command <code>/getplayers</code> (Only available to Match Host) to match\n        player names with the data. <strong>Server-side process is not required</strong>, it runs on your browser only.",R=f(),L=u("p"),L.innerHTML='Source code is in\n        <a href="https://github.com/minixz/sar-leaderboard-ocr-web" target="_blank">https://github.com/minixz/sar-leaderboard-ocr-web</a>',P=f(),D=u("h2"),D.textContent="Accuracy",j=f(),T=u("p"),T.innerHTML="This application is tested to <strong>100%</strong> accuracy in resolution\n        <i>1:1 1920x1080 size without application bar</i> (which is the <strong>screenshot requirement</strong>).\n        However, there could still be some factors for potentional inaccuracy, double checking the data after conversion\n        is recommended.",m(d,"class","input-list svelte-1av7x6j"),m(b,"type","button"),b.disabled=_=!t[1],m(A,"class","btn-success"),m(A,"type","button"),A.disabled=k=!t[1]},m(e,r){s(e,n,r),a(n,i),a(n,o),a(n,d);for(let e=0;e<G.length;e+=1)G[e].m(d,null);a(n,g),Q&&Q.m(n,null),a(n,y),a(n,v),a(v,b),a(b,w),a(v,S),a(v,A),a(A,x),a(n,E),a(n,C),a(n,O),a(n,I),a(n,R),a(n,L),a(n,P),a(n,D),a(n,j),a(n,T),$=!0,U||(F=[p(b,"click",t[4]),p(A,"click",t[6])],U=!0)},p(e,[t]){if(33&t){let n;for(W=e[0],n=0;n<W.length;n+=1){const r=se(e,W,n);G[n]?(G[n].p(r,t),z(G[n],1)):(G[n]=le(r),G[n].c(),z(G[n],1),G[n].m(d,null))}for(B(),n=W.length;n<G.length;n+=1)H(n);M()}e[2]||Q.p(e,t),(!$||2&t&&_!==(_=!e[1]))&&(b.disabled=_),(!$||2&t&&k!==(k=!e[1]))&&(A.disabled=k)},i(e){if(!$){for(let e=0;e<W.length;e+=1)z(G[e]);$=!0}},o(e){G=G.filter(Boolean);for(let e=0;e<G.length;e+=1)N(G[e]);$=!1},d(e){e&&l(n),c(G,e),Q&&Q.d(),U=!1,r(F)}}}function ue(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const i=x(),{isProd:o}={isProd:!0};let{inputs:a}=t,{compareOutput:s}=t,l=!1;function c(e){if(a.length<=1)return;const t=[...a];t.splice(e,1),n(0,a=t)}return e.$$set=e=>{"inputs"in e&&n(0,a=e.inputs),"compareOutput"in e&&n(7,s=e.compareOutput)},e.$$.update=()=>{1&e.$$.dirty&&n(1,l=a.every((e=>!!e.imageUrl&&!!e.players&&0===e._errors.length)))},[a,l,o,function(e){return r(this,void 0,void 0,(function*(){const t=e.target,[r]=t.files;n(7,s=yield r.text())}))},function(){n(0,a=a.concat({players:"",isIncludeBots:!1,isSingleColumn:!1,_errors:[]}))},c,function(){i("submit")},s,function(e,t,r,i){r[i]=e,n(0,a)},e=>c(e)]}class de extends Y{constructor(e){super(),q(this,e,ue,ce,o,{inputs:0,compareOutput:7})}}function he(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function fe(e){return function t(n){return 0===arguments.length||he(n)?t:e.apply(this,arguments)}}var pe=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};var ge=fe((function(e){return!!pe(e)||!!e&&("object"==typeof e&&(!function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))}));function me(e){return function t(n){for(var r,i,o,a=[],s=0,l=n.length;s<l;){if(ge(n[s]))for(o=0,i=(r=e?t(n[s]):n[s]).length;o<i;)a[a.length]=r[o],o+=1;else a[a.length]=n[s];s+=1}return a}}var ye=fe(me(!0));ee((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=u(e,t,n);if("normal"===l.type){if(r=n.done?p:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",g={};function m(){}function y(){}function v(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,o)&&(b=_);var S=v.prototype=m.prototype=Object.create(b);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:R}}function R(){return{value:t,done:!0}}return y.prototype=S.constructor=v,v.constructor=y,y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},A(x.prototype),x.prototype[a]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new x(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(S),l(S,s,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));var ve=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`;let be=0;var we=({id:e,action:t,payload:n={}})=>{let r=e;return void 0===r&&(r=ve("Job",be),be+=1),{id:r,action:t,payload:n}};let _e=!1;var Se={logging:_e,setLogging:e=>{_e=e},log:(...e)=>_e?console.log.apply(window,e):null};const{log:Ae}=Se;let xe=0;var ke=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)},Ee=ee((function(e,t){e.exports=function(){function e(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(t,n.firstChild);for(var r,i=document.createElement("a"),o=1;o<e;o++)i.href=arguments[o],r=i.href,t.href=r;return n.removeChild(t),r}return e}()}));const Ce="browser"===(e=>{const t={};return"undefined"!=typeof WorkerGlobalScope?t.type="webworker":"object"==typeof window?t.type="browser":ke()?t.type="electron":"object"==typeof process&&(t.type="node"),void 0===e?t:t[e]})("type")?Ee:e=>e;var Oe={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3},Ie={defaultOEM:Oe.DEFAULT},Re={name:"tesseract.js",version:"2.1.4",description:"Pure Javascript Multilingual OCR",main:"src/index.js",types:"src/index.d.ts",unpkg:"dist/tesseract.min.js",jsdelivr:"dist/tesseract.min.js",scripts:{start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},browser:{"./src/worker/node/index.js":"./src/worker/browser/index.js"},author:"",contributors:["jeromewu"],license:"Apache-2.0",devDependencies:{"@babel/core":"^7.7.7","@babel/preset-env":"^7.7.7",acorn:"^6.4.0","babel-loader":"^8.1.0",cors:"^2.8.5",eslint:"^7.2.0","eslint-config-airbnb-base":"^14.2.0","eslint-plugin-import":"^2.22.1","expect.js":"^0.3.1",express:"^4.17.1",mocha:"^8.1.3","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^2.7.1","wait-on":"^3.3.0",webpack:"^4.44.2","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.12","webpack-dev-middleware":"^3.7.2"},dependencies:{"blueimp-load-image":"^3.0.0","bmp-js":"^0.1.0","file-type":"^12.4.1","idb-keyval":"^3.2.0","is-electron":"^2.2.0","is-url":"^1.2.4","jpeg-autorotate":"^7.1.1","node-fetch":"^2.6.0","opencollective-postinstall":"^2.0.2","regenerator-runtime":"^0.13.3","resolve-url":"^0.2.1","tesseract.js-core":"^2.2.0",zlibjs:"^0.3.1"},repository:{type:"git",url:"https://github.com/naptha/tesseract.js.git"},bugs:{url:"https://github.com/naptha/tesseract.js/issues"},homepage:"https://github.com/naptha/tesseract.js",collective:{type:"opencollective",url:"https://opencollective.com/tesseractjs"}};const{version:Le,dependencies:Pe}=Re;var De={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{},workerPath:"undefined"!=typeof process&&"development"===process.env.TESS_ENV?Ee(`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`):`https://unpkg.com/tesseract.js@v${Le}/dist/worker.min.js`,corePath:`https://unpkg.com/tesseract.js-core@v${Pe["tesseract.js-core"].substring(1)}/tesseract-core.${"object"==typeof WebAssembly?"wasm":"asm"}.js`},je=ee((function(e){!function(t){function n(e,t,r){var i,o=document.createElement("img");function a(t,a){a&&console.log(a),t&&n.isInstanceOf("Blob",t)?(e=t,i=n.createObjectURL(e)):(i=e,r&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin)),o.src=i}return o.onerror=function(a){return n.onerror(o,a,e,i,t,r)},o.onload=function(a){return n.onload(o,a,e,i,t,r)},"string"==typeof e?(n.hasMetaOption(r)?n.fetchBlob(e,a,r):a(),o):n.isInstanceOf("Blob",e)||n.isInstanceOf("File",e)?(i=n.createObjectURL(e))?(o.src=i,o):n.readFile(e,(function(e){var n=e.target;n&&n.result?o.src=n.result:t&&t(e)})):void 0}var r=t.createObjectURL&&t||t.URL&&URL.revokeObjectURL&&URL||t.webkitURL&&webkitURL;function i(e,t){!e||"blob:"!==e.slice(0,5)||t&&t.noRevoke||n.revokeObjectURL(e)}n.hasMetaOption=function(e){return e&&e.meta},n.fetchBlob=function(e,t){t()},n.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},n.transform=function(e,t,n,r,i){n(e,i)},n.onerror=function(e,t,n,r,o,a){i(r,a),o&&o.call(e,t)},n.onload=function(e,t,r,o,a,s){i(o,s),a&&n.transform(e,s,a,r,{originalWidth:e.naturalWidth||e.width,originalHeight:e.naturalHeight||e.height})},n.createObjectURL=function(e){return!!r&&r.createObjectURL(e)},n.revokeObjectURL=function(e){return!!r&&r.revokeObjectURL(e)},n.readFile=function(e,n,r){if(t.FileReader){var i=new FileReader;if(i.onload=i.onerror=n,i[r=r||"readAsDataURL"])return i[r](e),i}return!1},e.exports?e.exports=n:t.loadImage=n}("undefined"!=typeof window&&window||Z)}));ee((function(e){var t;t=function(e){var t=e.transform;e.transform=function(n,r,i,o,a){t.call(e,e.scale(n,r,a),r,i,o,a)},e.transformCoordinates=function(){},e.getTransformedOptions=function(e,t){var n,r,i,o,a=t.aspectRatio;if(!a)return t;for(r in n={},t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.crop=!0,(i=e.naturalWidth||e.width)/(o=e.naturalHeight||e.height)>a?(n.maxWidth=o*a,n.maxHeight=o):(n.maxWidth=i,n.maxHeight=i/a),n},e.renderImageToCanvas=function(e,t,n,r,i,o,a,s,l,c,u){var d=e.getContext("2d");return!1===u.imageSmoothingEnabled?d.imageSmoothingEnabled=!1:u.imageSmoothingQuality&&(d.imageSmoothingQuality=u.imageSmoothingQuality),d.drawImage(t,n,r,i,o,a,s,l,c),e},e.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},e.scale=function(t,n,r){n=n||{};var i,o,a,s,l,c,u,d,h,f,p,g=document.createElement("canvas"),m=t.getContext||e.hasCanvasOption(n)&&g.getContext,y=t.naturalWidth||t.width,v=t.naturalHeight||t.height,b=y,w=v;function _(){var e=Math.max((a||b)/b,(s||w)/w);e>1&&(b*=e,w*=e)}function S(){var e=Math.min((i||b)/b,(o||w)/w);e<1&&(b*=e,w*=e)}if(m&&(u=(n=e.getTransformedOptions(t,n,r)).left||0,d=n.top||0,n.sourceWidth?(l=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(u=y-l-n.right)):l=y-u-(n.right||0),n.sourceHeight?(c=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(d=v-c-n.bottom)):c=v-d-(n.bottom||0),b=l,w=c),i=n.maxWidth,o=n.maxHeight,a=n.minWidth,s=n.minHeight,m&&i&&o&&n.crop?(b=i,w=o,(p=l/c-i/o)<0?(c=o*l/i,void 0===n.top&&void 0===n.bottom&&(d=(v-c)/2)):p>0&&(l=i*c/o,void 0===n.left&&void 0===n.right&&(u=(y-l)/2))):((n.contain||n.cover)&&(a=i=i||a,s=o=o||s),n.cover?(S(),_()):(_(),S())),m){if((h=n.pixelRatio)>1&&(g.style.width=b+"px",g.style.height=w+"px",b*=h,w*=h,g.getContext("2d").scale(h,h)),(f=n.downsamplingRatio)>0&&f<1&&b<l&&w<c)for(;l*f>b;)g.width=l*f,g.height=c*f,e.renderImageToCanvas(g,t,u,d,l,c,0,0,g.width,g.height,n),u=0,d=0,l=g.width,c=g.height,(t=document.createElement("canvas")).width=l,t.height=c,e.renderImageToCanvas(t,g,0,0,l,c,0,0,l,c,n);return g.width=b,g.height=w,e.transformCoordinates(g,n),e.renderImageToCanvas(g,t,u,d,l,c,0,0,b,w,n)}return t.width=b,t.height=w,t}},e.exports?t(je):t(window.loadImage)})),ee((function(e){var t;t=function(e){var t="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[],65517:[]}},e.parseMetaData=function(t,n,r,i){i=i||{};var o=this,a=(r=r||{}).maxMetaDataSize||262144;"undefined"!=typeof DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice&&e.readFile(e.blobSlice.call(t,0,a),(function(t){if(t.target.error)return console.log(t.target.error),void n(i);var a,s,l,c,u=t.target.result,d=new DataView(u),h=2,f=d.byteLength-4,p=h;if(65496===d.getUint16(0)){for(;h<f&&((a=d.getUint16(h))>=65504&&a<=65519||65534===a);){if(h+(s=d.getUint16(h+2)+2)>d.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if((l=e.metaDataParsers.jpeg[a])&&!r.disableMetaDataParsers)for(c=0;c<l.length;c+=1)l[c].call(o,d,h,s,i,r);p=h+=s}!r.disableImageHead&&p>6&&(u.slice?i.imageHead=u.slice(0,p):i.imageHead=new Uint8Array(u).subarray(0,p))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(i)}),"readAsArrayBuffer")||n(i)},e.replaceHead=function(t,n,r){e.parseMetaData(t,(function(i){r(new Blob([n,e.blobSlice.call(t,i.imageHead.byteLength)],{type:"image/jpeg"}))}),{maxMetaDataSize:256,disableMetaDataParsers:!0})};var n=e.transform;e.transform=function(t,r,i,o,a){e.hasMetaOption(r)?e.parseMetaData(o,(function(a){n.call(e,t,r,i,o,a)}),r,a):n.apply(e,arguments)}},e.exports?t(je):t(window.loadImage)}));ee((function(e){var t;t=function(e){"undefined"!=typeof fetch&&"undefined"!=typeof Request?e.fetchBlob=function(e,t,n){fetch(new Request(e,n)).then((function(e){return e.blob()})).then(t).catch((function(e){t(null,e)}))}:"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof ProgressEvent&&(e.fetchBlob=function(e,t,n){n=n||{};var r=new XMLHttpRequest;r.open(n.method||"GET",e),n.headers&&Object.keys(n.headers).forEach((function(e){r.setRequestHeader(e,n.headers[e])})),r.withCredentials="include"===n.credentials,r.responseType="blob",r.onload=function(){t(r.response)},r.onerror=r.onabort=r.ontimeout=function(e){t(null,e)},r.send(n.body)})},e.exports?t(je):t(window.loadImage)}));ee((function(e){var t;t=function(e){function t(e){e&&(Object.defineProperty(this,"map",{value:this.privateIFDs[e].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[e]||{}}))}t.prototype.map={Orientation:274,Thumbnail:513,Exif:34665,GPSInfo:34853,Interoperability:40965},t.prototype.privateIFDs={34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},t.prototype.get=function(e){return this[e]||this[this.map[e]]};var n={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}};function r(e,t,r,i,o,a){var s,l,c,u,d,h,f=n[i];if(f){if(!((l=(s=f.size*o)>4?t+e.getUint32(r+8,a):r+8)+s>e.byteLength)){if(1===o)return f.getValue(e,l,a);for(c=[],u=0;u<o;u+=1)c[u]=f.getValue(e,l+u*f.size,a);if(f.ascii){for(d="",u=0;u<c.length&&"\0"!==(h=c[u]);u+=1)d+=h;return d}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function i(e,t,n,i,o,a,s,l){var c,u,d,h,f,p;if(n+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((u=n+2+12*(c=e.getUint16(n,i)))+4>e.byteLength)){for(d=0;d<c;d+=1)h=n+2+12*d,f=e.getUint16(h,i),s&&!s[f]||l&&!0===l[f]||(p=r(e,t,h,e.getUint16(h+2,i),e.getUint32(h+4,i),i),o[f]=p,a&&(a[f]=h));return e.getUint32(u,i)}console.log("Invalid Exif data: Invalid directory size.")}}n[7]=n[1],e.parseExifData=function(e,n,r,o,a){if(!a.disableExif){var s,l,c=a.includeExifTags,u=a.excludeExifTags||{34665:{37500:!0}},d=n+10;if(1165519206===e.getUint32(n+4))if(d+8>e.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===e.getUint16(n+8)){switch(e.getUint16(d)){case 18761:s=!0;break;case 19789:s=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===e.getUint16(d+2,s)?(l=e.getUint32(d+4,s),o.exif=new t,a.disableExifOffsets||(o.exifOffsets=new t,o.exifTiffOffset=d,o.exifLittleEndian=s),(l=i(e,d,d+l,s,o.exif,o.exifOffsets,c,u))&&!a.disableExifThumbnail&&(l=i(e,d,d+l,s,o.exif,o.exifOffsets,c,u),o.exif[513]&&o.exif[514]&&(o.exif[513]=function(e,t,n){if(n&&!(t+n>e.byteLength))return new Blob([e.buffer.slice(t,t+n)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}(e,d+o.exif[513],o.exif[514]))),Object.keys(o.exif.privateIFDs).forEach((function(n){!function(e,n,r,o,a,s,l){var c=e.exif[n];c&&(e.exif[n]=new t(n),e.exifOffsets&&(e.exifOffsets[n]=new t(n)),i(r,o,o+c,a,e.exif[n],e.exifOffsets&&e.exifOffsets[n],s&&s[n],l&&l[n]))}(o,n,e,d,s,c,u)}))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(e,t,n){return new DataView(e,t.exifOffsets[274]+8,2).setUint16(0,n,t.exifLittleEndian),e}},e.writeExifData=function(t,n,r,i){e.exifWriters[n.exif.map[r]](t,n,i)},e.ExifMap=t},e.exports?t(je):t(window.loadImage)}));ee((function(e){var t;t=function(e){var t=e.ExifMap.prototype;t.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},t.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},t.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},t.getAll=function(){var e,t,n,r={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&((t=this[e])&&t.getAll?r[this.privateIFDs[e].name]=t.getAll():(n=this.tags[e])&&(r[n]=this.getText(n)));return r},t.getName=function(e){var t=this.tags[e];return"object"==typeof t?this.privateIFDs[e].name:t},function(){var e,n,r,i=t.tags;for(e in i)if(Object.prototype.hasOwnProperty.call(i,e))if(n=t.privateIFDs[e])for(e in r=i[e])Object.prototype.hasOwnProperty.call(r,e)&&(n.map[r[e]]=Number(e));else t.map[i[e]]=Number(e)}()},e.exports?t(je):t(window.loadImage)}));ee((function(e){var t;t=function(e){function t(){}function n(e,t,n,r,i){return"binary"===t.types[e]?new Blob([n.buffer.slice(r,r+i)]):"Uint16"===t.types[e]?n.getUint16(r):function(e,t,n){for(var r="",i=t+n,o=t;o<i;o+=1)r+=String.fromCharCode(e.getUint8(o));return r}(n,r,i)}function r(e,t){return void 0===e?t:e instanceof Array?(e.push(t),e):[e,t]}function i(e,t,i,o,a,s){for(var l,c,u,d=t+i,h=t;h<d;)28===e.getUint8(h)&&2===e.getUint8(h+1)&&(u=e.getUint8(h+2),a&&!a[u]||s&&s[u]||(c=e.getInt16(h+3),l=n(u,o.iptc,e,h+5,c),o.iptc[u]=r(o.iptc[u],l),o.iptcOffsets&&(o.iptcOffsets[u]=h))),h+=1}function o(e,t){return 943868237===e.getUint32(t)&&1028===e.getUint16(t+4)}function a(e,t){var n=e.getUint8(t+7);return n%2!=0&&(n+=1),0===n&&(n=4),n}t.prototype.map={ObjectName:5},t.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},t.prototype.get=function(e){return this[e]||this[this.map[e]]},e.parseIptcData=function(e,n,r,s,l){if(!l.disableIptc)for(var c=n+r;n+8<c;){if(o(e,n)){var u=a(e,n),d=n+8+u;if(d>c){console.log("Invalid IPTC data: Invalid segment offset.");break}var h=e.getUint16(n+6+u);if(n+h>c){console.log("Invalid IPTC data: Invalid segment size.");break}return s.iptc=new t,l.disableIptcOffsets||(s.iptcOffsets=new t),void i(e,d,h,s,l.includeIptcTags,l.excludeIptcTags||{202:!0})}n+=1}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData),e.IptcMap=t},e.exports?t(je):t(window.loadImage)}));ee((function(e){var t;t=function(e){var t=e.IptcMap.prototype;t.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},t.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},t.getText=function(e){var t=this.get(e),n=this.map[e],r=this.stringValues[n];return r?r[t]:String(t)},t.getAll=function(){var e,t,n={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e])&&(n[t]=this.getText(t));return n},t.getName=function(e){return this.tags[e]},function(){var e,n=t.tags,r=t.map||{};for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[n[e]]=Number(e))}()},e.exports?t(je):t(window.loadImage)})),ee((function(e){var t;t=function(e){var t,n=e.hasCanvasOption,r=e.hasMetaOption,i=e.transformCoordinates,o=e.getTransformedOptions;(t=document.createElement("img")).onload=function(){e.orientation=1===t.width&&2===t.height},t.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",e.hasCanvasOption=function(t){return 1==!!t.orientation&&!e.orientation||t.orientation>1&&t.orientation<9||n.call(e,t)},e.hasMetaOption=function(t){return t&&!0===t.orientation&&!e.orientation||r.call(e,t)},e.transformCoordinates=function(t,n){i.call(e,t,n);var r=t.getContext("2d"),o=t.width,a=t.height,s=t.style.width,l=t.style.height,c=n.orientation;if(c>1&&c<9)switch(c>4&&(t.width=a,t.height=o,t.style.width=l,t.style.height=s),c){case 2:r.translate(o,0),r.scale(-1,1);break;case 3:r.translate(o,a),r.rotate(Math.PI);break;case 4:r.translate(0,a),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-a);break;case 7:r.rotate(.5*Math.PI),r.translate(o,-a),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-o,0)}},e.getTransformedOptions=function(t,n,r){var i,a,s=o.call(e,t,n),l=s.orientation;if(!0===l){if(e.orientation)return s;l=r&&r.exif&&r.exif.get("Orientation")}if(!(l>1&&l<9))return s;for(a in i={},s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a]);switch(i.orientation=l,l){case 2:i.left=s.right,i.right=s.left;break;case 3:i.left=s.right,i.top=s.bottom,i.right=s.left,i.bottom=s.top;break;case 4:i.top=s.bottom,i.bottom=s.top;break;case 5:i.left=s.top,i.top=s.left,i.right=s.bottom,i.bottom=s.right;break;case 6:i.left=s.top,i.top=s.right,i.right=s.bottom,i.bottom=s.left;break;case 7:i.left=s.bottom,i.top=s.right,i.right=s.top,i.bottom=s.left;break;case 8:i.left=s.bottom,i.top=s.left,i.right=s.top,i.bottom=s.right}return i.orientation>4&&(i.maxWidth=s.maxHeight,i.maxHeight=s.maxWidth,i.minWidth=s.minHeight,i.minHeight=s.minWidth,i.sourceWidth=s.sourceHeight,i.sourceHeight=s.sourceWidth),i}},e.exports?t(je):t(window.loadImage)}));var Te=je;const $e=e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=({target:{error:{code:e}}})=>{n(Error(`File could not be read! Code=${e}`))},r.readAsArrayBuffer(e)})),Ue=e=>new Promise((t=>{Te(e,(e=>e.toBlob(t)),{orientation:!0,canvas:!0})})),Fe=async e=>{let t=e;if(void 0===e)return"undefined";if("string"==typeof e)if(e.endsWith(".pbm")){const n=await fetch(Ee(e));t=await n.arrayBuffer()}else{let n=e;/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)||(n=Ee(e)),t=await $e(await Ue(n))}else if(e instanceof HTMLElement)"IMG"===e.tagName&&(t=await Fe(e.src)),"VIDEO"===e.tagName&&(t=await Fe(e.poster)),"CANVAS"===e.tagName&&await new Promise((n=>{e.toBlob((async e=>{t=await $e(e),n()}))}));else if(e instanceof File||e instanceof Blob){let n=e;e.name.endsWith(".pbm")||(n=await Ue(n)),t=await $e(n)}return new Uint8Array(t)};var Be={defaultOptions:De,spawnWorker:({workerPath:e,workerBlobURL:t})=>{let n;if(Blob&&URL&&t){const t=new Blob([`importScripts("${e}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(t))}else n=new Worker(e);return n},terminateWorker:e=>{e.terminate()},onMessage:(e,t)=>{e.onmessage=({data:e})=>{t(e)}},send:async(e,t)=>{e.postMessage(t)},loadImage:Fe};const{log:Me}=Se,{defaultOEM:ze}=Ie,{defaultOptions:Ne,spawnWorker:We,terminateWorker:Ge,onMessage:He,loadImage:Qe,send:Ve}=Be;let qe=0;var Ye=(e={})=>{const t=ve("Worker",qe),{logger:n,errorHandler:r,...i}=(e=>{const t={...e};return["corePath","workerPath","langPath"].forEach((n=>{void 0!==e[n]&&(t[n]=Ce(t[n]))})),t})({...Ne,...e}),o={},a={};let s=We(i);qe+=1;const l=(e,t)=>{o[e]=t},c=(e,t)=>{a[e]=t},u=({id:e,action:n,payload:r})=>new Promise(((i,o)=>{Me(`[${t}]: Start ${e}, action=${n}`),l(n,i),c(n,o),Ve(s,{workerId:t,jobId:e,action:n,payload:r})}));return He(s,(({workerId:e,jobId:t,status:i,action:s,data:l})=>{if("resolve"===i){Me(`[${e}]: Complete ${t}`);let n=l;"recognize"===s?n=(e=>{const t=[],n=[],r=[],i=[],o=[];return e.blocks.forEach((a=>{a.paragraphs.forEach((t=>{t.lines.forEach((n=>{n.words.forEach((r=>{r.symbols.forEach((i=>{o.push({...i,page:e,block:a,paragraph:t,line:n,word:r})})),i.push({...r,page:e,block:a,paragraph:t,line:n})})),r.push({...n,page:e,block:a,paragraph:t})})),n.push({...t,page:e,block:a})})),t.push({...a,page:e})})),{...e,blocks:t,paragraphs:n,lines:r,words:i,symbols:o}})(l):"getPDF"===s&&(n=Array.from({...l,length:Object.keys(l).length})),o[s]({jobId:t,data:n})}else if("reject"===i){if(a[s](l),!r)throw Error(l);r(l)}else"progress"===i&&n(l)})),{id:t,worker:s,setResolve:l,setReject:c,load:e=>u(we({id:e,action:"load",payload:{options:i}})),writeText:(e,t,n)=>u(we({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>u(we({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>u(we({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,n)=>u(we({id:n,action:"FS",payload:{method:e,args:t}})),loadLanguage:(e="eng",t)=>u(we({id:t,action:"loadLanguage",payload:{langs:e,options:i}})),initialize:(e="eng",t=ze,n)=>u(we({id:n,action:"initialize",payload:{langs:e,oem:t}})),setParameters:(e={},t)=>u(we({id:t,action:"setParameters",payload:{params:e}})),recognize:async(e,t={},n)=>u(we({id:n,action:"recognize",payload:{image:await Qe(e),options:t}})),getPDF:(e="Tesseract OCR Result",t=!1,n)=>u(we({id:n,action:"getPDF",payload:{title:e,textonly:t}})),detect:async(e,t)=>u(we({id:t,action:"detect",payload:{image:await Qe(e)}})),terminate:async()=>(null!==s&&(Ge(s),s=null),Promise.resolve())}};var Ke={recognize:async(e,t,n)=>{const r=Ye(n);return await r.load(),await r.loadLanguage(t),await r.initialize(t),r.recognize(e).finally((async()=>{await r.terminate()}))},detect:async(e,t)=>{const n=Ye(t);return await n.load(),await n.loadLanguage("osd"),await n.initialize("osd"),n.detect(e).finally((async()=>{await n.terminate()}))}};const{setLogging:Xe}=Se;var Je={OEM:Oe,PSM:{OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12"},createScheduler:()=>{const e=ve("Scheduler",xe),t={},n={};let r=[];xe+=1;const i=()=>Object.keys(t).length,o=()=>{if(0!==r.length){const e=Object.keys(t);for(let i=0;i<e.length;i+=1)if(void 0===n[e[i]]){r[0](t[e[i]]);break}}};return{addWorker:n=>(t[n.id]=n,Ae(`[${e}]: Add ${n.id}`),Ae(`[${e}]: Number of workers=${i()}`),o(),n.id),addJob:async(t,...a)=>{if(0===i())throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return((t,i)=>new Promise(((a,s)=>{const l=we({action:t,payload:i});r.push((async e=>{r.shift(),n[e.id]=l;try{a(await e[t].apply(window,[...i,l.id]))}catch(e){s(e)}finally{delete n[e.id],o()}})),Ae(`[${e}]: Add ${l.id} to JobQueue`),Ae(`[${e}]: JobQueue length=${r.length}`),o()})))(t,a)},terminate:async()=>{Object.keys(t).forEach((async e=>{await t[e].terminate()})),r=[]},getQueueLen:()=>r.length,getNumWorkers:i}},createWorker:Ye,setLogging:Xe,...Ke};class Ze{constructor(e){this.nextRowOffset=e.nextRowOffset,this.rowWidth=e.rowWidth,this.rowHeight=e.rowHeight,this.startX=e.startX,this.startY=e.startY,this.maskStartX=e.maskStartX,this.maskWidth=e.maskWidth,this.scaleUp=e.scaleUp,this.threshold=e.threshold,this._totalRows=e.totalRows}get totalRows(){return this._totalRows}updateCanvasSize(e){e.width=this.rowWidth*this.scaleUp,e.height=this.rowHeight*this.scaleUp}writeImage(e,t,n,r){const i=r%32,o=(r>=32?this.rowWidth+this.nextRowOffset:0)*this.scaleUp,a=this.rowHeight*this.scaleUp*i;t.globalCompositeOperation="source-over",t.drawImage(n,-this.startX*this.scaleUp-o,-this.startY*this.scaleUp-a,n.width*this.scaleUp,n.height*this.scaleUp),t.globalCompositeOperation="difference",t.fillStyle="white",t.globalAlpha=1,t.fillRect(0,0,e.width,e.height);const s=t.getImageData(0,0,e.width,e.height);for(let e=0;e<s.data.length;e+=4)s.data[e]=s.data[e+1]=s.data[e+2]=s.data[e+1]>this.threshold?255:0;t.putImageData(s,0,0),t.globalCompositeOperation="source-over",t.fillStyle="white",t.fillRect(this.maskStartX*this.scaleUp,0,this.maskWidth*this.scaleUp,e.height)}}function et(e,t,n){const r=e.slice();return r[23]=t[n],r}function tt(e,t,n){const r=e.slice();return r[26]=t[n],r[28]=n,r}function nt(e,t,n){const r=e.slice();return r[26]=t[n],r[28]=n,r}function rt(e,t,n){const r=e.slice();return r[26]=t[n],r[28]=n,r}function it(e){let t,n,i,o;return{c(){t=u("img"),m(t,"class","ocr-target svelte-10ep5n5"),t.src!==(n=e[3].imageUrl)&&m(t,"src",n),m(t,"alt","OCR target")},m(n,r){s(n,t,r),i||(o=[p(t,"load",e[9]),p(t,"error",ht)],i=!0)},p(e,r){8&r&&t.src!==(n=e[3].imageUrl)&&m(t,"src",n)},d(e){e&&l(t),i=!1,r(o)}}}function ot(t){let n,r,i=`Round ${t[28]+1}`;return{c(){n=u("th"),r=h(i),m(n,"colspan","2"),m(n,"class","svelte-10ep5n5"),w(n,"result-column--odd",t[28]%2==1)},m(e,t){s(e,n,t),a(n,r)},p:e,d(e){e&&l(n)}}}function at(t){let n,r,i;return{c(){n=u("th"),n.textContent="Rank",r=f(),i=u("th"),i.textContent="Kills",m(n,"class","svelte-10ep5n5"),w(n,"result-column--odd",t[28]%2==1),m(i,"class","svelte-10ep5n5"),w(i,"result-column--odd",t[28]%2==1)},m(e,t){s(e,n,t),s(e,r,t),s(e,i,t)},p:e,d(e){e&&l(n),e&&l(r),e&&l(i)}}}function st(e){let t,n,r,i,o,c=(e[23].rounds[e[28]].rank??"N / A")+"",d=(e[23].rounds[e[28]].kills??"N / A")+"";return{c(){t=u("td"),n=h(c),r=f(),i=u("td"),o=h(d),m(t,"class","svelte-10ep5n5"),w(t,"result-column--odd",e[28]%2==1),w(t,"result-column--compare-invalid",e[12](e[23],e[28],"rank")),m(i,"class","svelte-10ep5n5"),w(i,"result-column--odd",e[28]%2==1),w(i,"result-column--compare-invalid",e[12](e[23],e[28],"kills"))},m(e,l){s(e,t,l),a(t,n),s(e,r,l),s(e,i,l),a(i,o)},p(e,r){16&r&&c!==(c=(e[23].rounds[e[28]].rank??"N / A")+"")&&y(n,c),4112&r&&w(t,"result-column--compare-invalid",e[12](e[23],e[28],"rank")),16&r&&d!==(d=(e[23].rounds[e[28]].kills??"N / A")+"")&&y(o,d),4112&r&&w(i,"result-column--compare-invalid",e[12](e[23],e[28],"kills"))},d(e){e&&l(t),e&&l(r),e&&l(i)}}}function lt(e){let t,n,r,i,o,d,p,g,v,b,_,S=e[23].name+"",A=ut(e[23].rounds)+"",x=dt(e[23].rounds)+"",k=e[0],E=[];for(let t=0;t<k.length;t+=1)E[t]=st(tt(e,k,t));return{c(){t=u("tr"),n=u("td"),r=h(S),i=f();for(let e=0;e<E.length;e+=1)E[e].c();o=f(),d=u("td"),p=h(A),g=f(),v=u("td"),b=h(x),_=f(),m(n,"class","svelte-10ep5n5"),m(d,"class","svelte-10ep5n5"),w(d,"result-column--odd",e[0].length%2==1),m(v,"class","svelte-10ep5n5"),w(v,"result-column--odd",e[0].length%2==1)},m(e,l){s(e,t,l),a(t,n),a(n,r),a(t,i);for(let e=0;e<E.length;e+=1)E[e].m(t,null);a(t,o),a(t,d),a(d,p),a(t,g),a(t,v),a(v,b),a(t,_)},p(e,n){if(16&n&&S!==(S=e[23].name+"")&&y(r,S),4113&n){let r;for(k=e[0],r=0;r<k.length;r+=1){const i=tt(e,k,r);E[r]?E[r].p(i,n):(E[r]=st(i),E[r].c(),E[r].m(t,o))}for(;r<E.length;r+=1)E[r].d(1);E.length=k.length}16&n&&A!==(A=ut(e[23].rounds)+"")&&y(p,A),1&n&&w(d,"result-column--odd",e[0].length%2==1),16&n&&x!==(x=dt(e[23].rounds)+"")&&y(b,x),1&n&&w(v,"result-column--odd",e[0].length%2==1)},d(e){e&&l(t),c(E,e)}}}function ct(t){let n,i,o,d,g,v,_,S,A,x,k,E,C,O,I,R,L,P,D,j,T,$,U,F,B,M,z,N,W,G,H,Q,V,q,Y,K,X,J,Z,ee,te,ne,re,ie,oe=t[1]+1+"",ae=t[0].length+"",se=t[5]?"Downloading...":"Download as CSV",le=t[3]&&it(t),ce=t[0],ue=[];for(let e=0;e<ce.length;e+=1)ue[e]=ot(rt(t,ce,e));let de=t[0],he=[];for(let e=0;e<de.length;e+=1)he[e]=at(nt(t,de,e));let fe=t[4],pe=[];for(let e=0;e<fe.length;e+=1)pe[e]=lt(et(t,fe,e));return{c(){n=u("div"),le&&le.c(),i=f(),o=u("div"),d=u("div"),g=u("div"),v=f(),_=u("div"),S=f(),A=u("span"),x=h(oe),k=h("/"),E=h(ae),C=f(),O=u("button"),I=h(se),L=f(),P=u("button"),D=h("Restart"),T=f(),$=u("div"),U=u("div"),U.textContent="OCR Process",F=f(),B=u("canvas"),M=f(),z=u("div"),N=u("table"),W=u("thead"),G=u("tr"),H=u("th"),H.textContent="Name",Q=f();for(let e=0;e<ue.length;e+=1)ue[e].c();V=f(),q=u("th"),q.textContent="Final",Y=f(),K=u("tr");for(let e=0;e<he.length;e+=1)he[e].c();X=f(),J=u("th"),J.textContent="Highest Rank",Z=f(),ee=u("th"),ee.textContent="Total Kills",te=f(),ne=u("tbody");for(let e=0;e<pe.length;e+=1)pe[e].c();m(g,"class","progress-bar__inner svelte-10ep5n5"),m(g,"data-progress",t[7]),b(g,"width",t[7]+"%"),m(_,"class","progress-bar__inner-sub svelte-10ep5n5"),b(_,"width",t[8]+"%"),m(A,"class","progress-bar__progress svelte-10ep5n5"),m(d,"class","progress-bar svelte-10ep5n5"),m(O,"class","btn-download-as-csv btn-success svelte-10ep5n5"),m(O,"type","button"),O.disabled=R=!t[2]||!!t[5],m(P,"type","button"),P.disabled=j=!t[2],m(o,"class","status svelte-10ep5n5"),m(B,"id","canvas"),m(B,"class","process-canvas svelte-10ep5n5"),m($,"class","ocr-process-preview svelte-10ep5n5"),m(H,"class","result-table__heading-name svelte-10ep5n5"),m(H,"rowspan","2"),m(q,"colspan","2"),m(q,"class","svelte-10ep5n5"),w(q,"result-column--odd",t[0].length%2==1),m(J,"class","svelte-10ep5n5"),m(ee,"class","svelte-10ep5n5"),m(N,"class","result-table svelte-10ep5n5"),m(z,"class","result-table-scroll-view svelte-10ep5n5")},m(e,r){s(e,n,r),le&&le.m(n,null),a(n,i),a(n,o),a(o,d),a(d,g),a(d,v),a(d,_),a(d,S),a(d,A),a(A,x),a(A,k),a(A,E),a(o,C),a(o,O),a(O,I),a(o,L),a(o,P),a(P,D),a(n,T),a(n,$),a($,U),a($,F),a($,B),t[16](B),a(n,M),a(n,z),a(z,N),a(N,W),a(W,G),a(G,H),a(G,Q);for(let e=0;e<ue.length;e+=1)ue[e].m(G,null);a(G,V),a(G,q),a(W,Y),a(W,K);for(let e=0;e<he.length;e+=1)he[e].m(K,null);a(K,X),a(K,J),a(K,Z),a(K,ee),a(N,te),a(N,ne);for(let e=0;e<pe.length;e+=1)pe[e].m(ne,null);re||(ie=[p(O,"click",t[10]),p(P,"click",t[11])],re=!0)},p(e,[t]){if(e[3]?le?le.p(e,t):(le=it(e),le.c(),le.m(n,i)):le&&(le.d(1),le=null),128&t&&m(g,"data-progress",e[7]),128&t&&b(g,"width",e[7]+"%"),256&t&&b(_,"width",e[8]+"%"),2&t&&oe!==(oe=e[1]+1+"")&&y(x,oe),1&t&&ae!==(ae=e[0].length+"")&&y(E,ae),32&t&&se!==(se=e[5]?"Downloading...":"Download as CSV")&&y(I,se),36&t&&R!==(R=!e[2]||!!e[5])&&(O.disabled=R),4&t&&j!==(j=!e[2])&&(P.disabled=j),1&t){let n;for(ce=e[0],n=0;n<ce.length;n+=1){const r=rt(e,ce,n);ue[n]?ue[n].p(r,t):(ue[n]=ot(r),ue[n].c(),ue[n].m(G,V))}for(;n<ue.length;n+=1)ue[n].d(1);ue.length=ce.length}if(1&t&&w(q,"result-column--odd",e[0].length%2==1),1&t){let n;for(de=e[0],n=0;n<de.length;n+=1){const r=nt(e,de,n);he[n]?he[n].p(r,t):(he[n]=at(r),he[n].c(),he[n].m(K,X))}for(;n<he.length;n+=1)he[n].d(1);he.length=de.length}if(4113&t){let n;for(fe=e[4],n=0;n<fe.length;n+=1){const r=et(e,fe,n);pe[n]?pe[n].p(r,t):(pe[n]=lt(r),pe[n].c(),pe[n].m(ne,null))}for(;n<pe.length;n+=1)pe[n].d(1);pe.length=fe.length}},i:e,o:e,d(e){e&&l(n),le&&le.d(),t[16](null),c(ue,e),c(he,e),c(pe,e),re=!1,r(ie)}}}function ut(e){return Math.min(...e.filter((e=>null!==e.rank)).map((e=>e.rank)))}function dt(e){return e.map((e=>{var t;return null!==(t=e.kills)&&void 0!==t?t:0})).reduce(((e,t)=>e+t),0)}function ht(e){console.error(e)}function ft(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const i=new Ze({nextRowOffset:150,rowWidth:290,rowHeight:30,startX:589,startY:76,maskStartX:45,maskWidth:190,scaleUp:3.5,threshold:101,totalRows:64}),o=new Ze({nextRowOffset:150,rowWidth:290,rowHeight:30,startX:805,startY:76,maskStartX:45,maskWidth:190,scaleUp:3,threshold:90,totalRows:32}),a=x();let s,l,c,u,d,{inputs:h}=t,{compareOutput:f}=t,p=0,g=i,m=[],y=!1,v=!1,b=0,w=0;var _;return _=()=>{if(u=c.getContext("2d"),n(3,s=h[p]),n(14,g=s.isSingleColumn?o:i),g.updateCanvasSize(c),f){const e=te.parse(f,{header:!0});l=e.data}},A().$$.on_mount.push(_),e.$$set=e=>{"inputs"in e&&n(0,h=e.inputs),"compareOutput"in e&&n(13,f=e.compareOutput)},e.$$.update=()=>{49159&e.$$.dirty&&(n(7,b=y?100:p/h.length*100),n(8,w=d/g.totalRows*100))},[h,p,y,s,m,v,c,b,w,function(e){var t;return r(this,void 0,void 0,(function*(){const r=e.target,a=ne.parsePlayers(s.players);if(a.errors.length>0)return void console.error(a.errors);const l=a.data;let f;try{for(f=Je.createWorker({langPath:"/"}),yield f.load(),yield f.loadLanguage("eng"),yield f.initialize("eng"),yield f.setParameters({tessedit_ocr_engine_mode:Je.OEM.LSTM_ONLY,tessedit_pageseg_mode:Je.PSM.SINGLE_BLOCK,tessedit_char_whitelist:"0123456789"}),n(15,d=0);d<g.totalRows;n(15,d++,d)){g.writeImage(c,u,r,d);const{data:{text:e}}=yield f.recognize(c.toDataURL()),[i,o]=e.trim().split(" "),a=l.find((e=>e.pID===i));if(!a)continue;if(!a.PlayfabID&&!s.isIncludeBots)continue;const y=null!==(t=a.Player)&&void 0!==t?t:"Unknown",v=m.findIndex((e=>e.name===y)),b=-1===v?{name:y,rounds:Array(h.length).fill(null).map((()=>({rank:null,kills:null})))}:m[v];if(b.rounds[p].rank=d+1,b.rounds[p].kills=Number(o),-1===v)n(4,m=m.concat(b));else{const e=[...m];e[v]=b,n(4,m=e)}}if(p>=h.length-1)return void n(2,y=!0);n(1,p+=1),n(3,s=h[p]),n(14,g=s.isSingleColumn?o:i),g.updateCanvasSize(c)}finally{f.terminate()}}))},function(){n(5,v=!0);const e=m.map((e=>Object.assign(Object.assign({name:e.name},e.rounds.reduce(((e,t,n)=>(e[`round_${n+1}_rank`]=t.rank,e[`round_${n+1}_kills`]=t.kills,e)),{})),{highest_rank:ut(e.rounds),total_kills:dt(e.rounds)}))),t=te.unparse(e,{header:!0,columns:["name",...ye(h.map(((e,t)=>[`round_${t+1}_rank`,`round_${t+1}_kills`]))),"highest_rank","total_kills"]}),r=document.createElement("a");r.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(t)}`),r.setAttribute("download","sar-result.csv"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout((()=>{n(5,v=!1)}),2e3)},function(){a("restart")},function(e,t,n){var r;return!!f&&`${null!==(r=e.rounds[t][n])&&void 0!==r?r:""}`!==l.find((t=>t.name===e.name))[`round_${t+1}_${n}`]},f,g,d,function(e){E[e?"unshift":"push"]((()=>{c=e,n(6,c)}))}]}class pt extends Y{constructor(e){super(),q(this,e,ft,ct,o,{inputs:0,compareOutput:13})}}function gt(e){let t,n,r,i;function o(t){e[5](t)}function a(t){e[6](t)}let s={};return void 0!==e[1]&&(s.inputs=e[1]),void 0!==e[2]&&(s.compareOutput=e[2]),t=new de({props:s}),E.push((()=>W(t,"inputs",o))),E.push((()=>W(t,"compareOutput",a))),t.$on("submit",e[3]),{c(){G(t.$$.fragment)},m(e,n){H(t,e,n),i=!0},p(e,i){const o={};!n&&2&i&&(n=!0,o.inputs=e[1],P((()=>n=!1))),!r&&4&i&&(r=!0,o.compareOutput=e[2],P((()=>r=!1))),t.$set(o)},i(e){i||(z(t.$$.fragment,e),i=!0)},o(e){N(t.$$.fragment,e),i=!1},d(e){Q(t,e)}}}function mt(e){let t,n;return t=new pt({props:{inputs:e[1],compareOutput:e[2]}}),t.$on("restart",e[4]),{c(){G(t.$$.fragment)},m(e,r){H(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.inputs=e[1]),4&n&&(r.compareOutput=e[2]),t.$set(r)},i(e){n||(z(t.$$.fragment,e),n=!0)},o(e){N(t.$$.fragment,e),n=!1},d(e){Q(t,e)}}}function yt(e){let t,n,r,i,o,c,d,h,p,g;t=new J({props:{href:"https://github.com/minixz/sar-leaderboard-ocr-web"}});const y=[mt,gt],v=[];function b(e,t){return e[0]?0:1}return c=b(e),d=v[c]=y[c](e),{c(){G(t.$$.fragment),n=f(),r=u("main"),i=u("h1"),i.textContent="SAR Leaderboard OCR",o=f(),d.c(),h=f(),p=u("footer"),p.innerHTML='<p>Develop by CocoaCaa (a.k.a. minixz)</p> \n    <p><a href="https://animalroyale.com/" target="_blank">Super Animal Royale</a>\n        is copyright\n        <a href="https://pixilestudios.com/" target="_blank">Pixile, Inc</a>\n        and is not affiliated with this site.</p>',m(p,"class","page-footer")},m(e,l){H(t,e,l),s(e,n,l),s(e,r,l),a(r,i),a(r,o),v[c].m(r,null),s(e,h,l),s(e,p,l),g=!0},p(e,[t]){let n=c;c=b(e),c===n?v[c].p(e,t):(B(),N(v[n],1,1,(()=>{v[n]=null})),M(),d=v[c],d?d.p(e,t):(d=v[c]=y[c](e),d.c()),z(d,1),d.m(r,null))},i(e){g||(z(t.$$.fragment,e),z(d),g=!0)},o(e){N(t.$$.fragment,e),N(d),g=!1},d(e){Q(t,e),e&&l(n),e&&l(r),v[c].d(),e&&l(h),e&&l(p)}}}function vt(e,t,n){let r=!1,i=[{players:"",isIncludeBots:!1,isSingleColumn:!1,_errors:[]}],o=null;return[r,i,o,function(){n(0,r=!0)},function(){n(0,r=!1)},function(e){i=e,n(1,i)},function(e){o=e,n(2,o)}]}return new class extends Y{constructor(e){super(),q(this,e,vt,yt,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
